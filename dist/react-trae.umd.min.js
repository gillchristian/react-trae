!(function(e, t) {
  'object' == typeof exports && 'undefined' != typeof module
    ? (module.exports = t(
        require('react'),
        require('prop-types'),
        require('trae')
      ))
    : 'function' == typeof define && define.amd
      ? define(['react', 'prop-types', 'trae'], t)
      : (e['react-trae'] = t(e.React, e.PropTypes, e.trae))
})(this, function(e, t, r) {
  'use strict'
  ;(e = e && 'default' in e
    ? e.default
    : e), (t = t && 'default' in t ? t.default : t), (r = r && 'default' in r ? r.default : r)
  var o = function(e, t) {
    if (!(e instanceof t))
      throw new TypeError('Cannot call a class as a function')
  },
    n = (function() {
      function e(e, t) {
        for (var r = 0; r < t.length; r++) {
          var o = t[r]
          ;(o.enumerable =
            o.enumerable || !1), (o.configurable = !0), 'value' in o &&
            (o.writable = !0), Object.defineProperty(e, o.key, o)
        }
      }
      return function(t, r, o) {
        return r && e(t.prototype, r), o && e(t, o), t
      }
    })(),
    a =
      Object.assign ||
      function(e) {
        for (var t = 1; t < arguments.length; t++) {
          var r = arguments[t]
          for (var o in r)
            Object.prototype.hasOwnProperty.call(r, o) && (e[o] = r[o])
        }
        return e
      },
    i = function(e, t) {
      if ('function' != typeof t && null !== t)
        throw new TypeError(
          'Super expression must either be null or a function, not ' + typeof t
        )
      ;(e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          enumerable: !1,
          writable: !0,
          configurable: !0,
        },
      })), t &&
        (Object.setPrototypeOf
          ? Object.setPrototypeOf(e, t)
          : (e.__proto__ = t))
    },
    c = function(e, t) {
      if (!e)
        throw new ReferenceError(
          "this hasn't been initialised - super() hasn't been called"
        )
      return !t || ('object' != typeof t && 'function' != typeof t) ? e : t
    },
    u = function(e) {
      if (Array.isArray(e)) {
        for (var t = 0, r = Array(e.length); t < e.length; t++) r[t] = e[t]
        return r
      }
      return Array.from(e)
    },
    s = ['get', 'put', 'patch', 'post', 'head', 'delete'],
    f = ['put', 'patch', 'post'],
    p = ['arrayBuffer', 'blob', 'formData', 'json', 'text', 'raw'],
    l = ['same-origin', 'no-cors', 'cors', 'navigate'],
    d = ['omit', 'same-origin', 'include'],
    y = [
      'default',
      'no-store',
      'reload',
      'no-cache',
      'force-cache',
      'only-if-cached',
    ],
    h = (function(e) {
      function t() {
        var e, r, n, a
        o(this, t)
        for (var i = arguments.length, u = Array(i), s = 0; s < i; s++)
          u[s] = arguments[s]
        return (r = n = c(
          this,
          (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(
            e,
            [this].concat(u)
          )
        )), (n.state = { loading: !0, error: !1, data: {} }), (a = r), c(n, a)
      }
      return i(t, e), n(t, [
        {
          key: 'componentDidMount',
          value: function() {
            var e = this
            r[this.props.method]
              .apply(r, u(this.requestParams()))
              .then(function(t) {
                return e.setState(a({ loading: !1 }, t))
              })
              .catch(function(t) {
                return e.setState(a({ loading: !1, error: t }, t))
              })
          },
        },
        {
          key: 'requestParams',
          value: function() {
            var e = this.props,
              t = e.url,
              r = e.method,
              o = e.bodyType,
              n = e.mode,
              a = e.credentials,
              i = e.cache,
              c = e.body,
              u = {
                bodyType: o,
                mode: n,
                credentials: a,
                cache: i,
                params: e.params,
                headers: e.headers,
              }
            return f.includes(r) ? [t, c, u] : [t, u]
          },
        },
        {
          key: 'render',
          value: function() {
            return this.props.children(this.state)
          },
        },
      ]), t
    })(e.Component)
  return (h.propTypes = {
    children: t.func.isRequired,
    url: t.string.isRequired,
    method: t.oneOf(s),
    bodyType: t.oneOf(p),
    mode: t.oneOf(l),
    credentials: t.oneOf(d),
    cache: t.oneOf(y),
    body: t.any,
    params: t.object,
    headers: t.object,
  }), (h.defaultProps = { method: 'get', bodyType: 'json', mode: 'cors', credentials: 'omit', cache: 'default', body: {}, params: {}, headers: {} }), h
})
